import os
import csv
import json
import requests

headers = {
    'accept': 'application/json, text/plain, */*',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.56',
    'accept-language': 'en-US,en;q=0.9',
    'locale': 'en_US',
    'x-api-key': 'yP6bAmceig0QmrXzGfx3IG867h5jKkAs',
    'cookie': 'ak_bmsc=C02E6E9BF79BB50382BA483CF5F460A1~000000000000000000000000000000~YAAQZDRoaFOZmYqEAQAAF4u7pxFKoEon0MA80iqIiVL1Q0BxpsVQI3zCjeCnZBb+DUo2x33YYK+tLsCKfUxfTULP43+ULdqdNnYWp6TrCMuK4s8JFLO7zUg5SY2v4b3XtY30Al2s6f+98++EWdpa9H8uVXnOEryokLDTSgx2OF1km8XZaFvQiLCnncaEBfvNap8YZyCt3sD+WZC2np9FcJgiwhj+5r5Ept99j+cAXw0vVdxVhwht0/xJLqBhJ0s5zt5HEQKTAw/y2h2fiD/ltzofdqDRTlI84B/gQ9czJv05uSx/mWzAwTdR5Ia8PFlpp/ucdVZKO5NO56e/n8Q4nXEvSgJ3aTshykB/lbPb1UEXhGwzTT5ELD3/ASqNwfy7PXrXZH7/c/MCwWUM; bm_sz=B4C355AEA63F203B9AB781F915035F00~YAAQZDRoaFSZmYqEAQAAF4u7pxEjkPoDwIskKJfnxCJOOeUE70D2Z+IPN8Z1erokN1HvnQRv2FUUiK5vwiW5cRTNJv+W0HywX9BCgOWTF7ocjX4QuLPKWsaRmbnNIki6bar9/6uWPVBgReOSuTLsJmeRHxrjxOdEx1Z5sbaKdcb4+XVJvMTFru+F4AezXairKBdfQy2/yHwmT9G8YHmbAUGaoANgOTUT4+4crUeOGqScvuYmQ4Chr0dJih+EGLWdzPlzYvp2pINFlA/Ey0HcxxL6pWlHp6/S1voAoTP4TDfTrujXBXw=~3425075~3159348; akacd_RWASP-default-phased-release=3846714197~rv=59~id=9770851086dc0997091f28b0a0c4c7d7; optimizelyEndUserId=oeu1669261400753r0.46094065807486384; ftr_ncd=6; __wid=538401456; OptanonConsent=isGpcEnabled=0&datestamp=Thu+Nov+24+2022+05%3A43%3A26+GMT%2B0200+(Eastern+European+Standard+Time)&version=202210.1.0&isIABGlobal=false&hosts=&consentId=106a6564-29b6-476e-80a6-6178302289a8&interactionCount=0&landingPath=https%3A%2F%2Fwww.toryburch.com%2Fen-us%2F&groups=C0001%3A1%2CC0003%3A1%2CC0002%3A1%2CBG79%3A1%2CC0004%3A1; dwsiteid=ToryBurch_US; _gcl_au=1.1.1620420122.1669261408; shipping-destination=US; sailthru_pageviews=1; _gid=GA1.2.1004126676.1669261412; _fbp=fb.1.1669261414240.216801677; _tt_enable_cookie=1; _ttp=d0f1e466-d82a-4cee-9a01-0fdc8f587de1; _abck=CCD3ECDDE5B44CEA3458FD471C2554BC~0~YAAQZDRoaIOZmYqEAQAA3dm7pwiiw4ViROL9oYIbru/mACuwfdLsRRcpDsjPaZrtPlGaQkEj8FYDF+Fy5EIMT/n1VCWuekpaM0O0UIYs1sEWE8Q7EV2j9vRYjrrAHMY6BoBn6g5tyFpq1GgGVY3wv3AQzUeY0CFGDjm7EQBEX3wBt7wqFuglr8w7RXRNOB16s1RkoxBmprfEjdnpudVAI2DrGzj6k04Yvu84XsFOh5vngt0VXudbDO4VOyDAUy8+qglmZEAN9iUkrxhMQ8NLxh/3882wVzREQQCwZEiuZ9tdicPtoSKILryODi7CbTULIaNlUghhFwTw6xg9FnQEvoyLQ/s/U4bp54Kwr7CWYFs4weWUrJbYH3IfFyv3zn53Rlt4oQ3hMjHxr6XYy7nlM5NH4TU4JtB/L+Dotg==~-1~||-1||~-1; FPLC=OYhOBDtrhAnmmLZZis0UjZruvhdnJ%2BTMvs25QIcFvPWYOfdUVZRuaG2VsDqXe%2FCjiMNYDVOWBsZ7hXVAnBaVlE5NmD%2FhVepWwbvjE2%2B9T%2Bayc8NZnxZTCZe5BLL%2BBw%3D%3D; FPIDTT=FPID2.2.%2B8GDlwN3Ixv7Y7oA9aasnWUzThw%2FEmOP5DpV82hToX8%3D.1669261412; _ga=GA1.2.801633521.1669261412; tfpsi=beb313d7-5d54-4fb7-8a82-4725ce9b4cec; _pin_unauth=dWlkPU1USmlObVZsTURNdE9XTXhZUzAwWm1JeExXRm1aREF0WkRnellXSXdaamt3WWpNMQ; forterToken=f02bb3bde920487181500cc8df5798db_1669261400879__UDF43-mnf-a4_6; _lr_geo_location=EG; _hjSessionUser_465730=eyJpZCI6IjBiMjFkMGRjLTU4NjMtNTM5Ny1iNTIyLWY4MTk1Y2JhMzhjYiIsImNyZWF0ZWQiOjE2NjkyNjE0MTg4NjEsImV4aXN0aW5nIjpmYWxzZX0=; _hjFirstSeen=1; _hjIncludedInSessionSample=0; _hjSession_465730=eyJpZCI6IjJlNmZlMTVjLWQyMWItNGZjYS05OWQ1LTg3OWM5Mzk2Mjg4MCIsImNyZWF0ZWQiOjE2NjkyNjE0MzEyMDAsImluU2FtcGxlIjpmYWxzZX0=; _hjAbsoluteSessionInProgress=0; fs_interstitial_popup_new_v1-cookie=true; _tq_id.TV-8181544590-1.0878=6e4a73325f81bbce.1669261415.0.1669261507..; _uetsid=2b4b9a906baa11ed8f3b2fec23196efa; _uetvid=2b4c72006baa11eda8cf1be77737e1ca; _ga_XXXXXXXX=GS1.1.1669261412.1.1.1669261508.0.0.0; _ga_E4TTT71WW9=GS1.1.1669261415.1.1.1669261508.0.0.0; bm_sv=D308D7C617E3DFB75FB1444723B20C5F~YAAQZDRoaFaamYqEAQAAVkK9pxEha3TFWttjgOE+GJ0rWe5/ymk0T9WY7bb9ogueEcNJdwYlrnh+uV6AKWeTTX7HqXgCfgYLO3hrt85caagMmqWBd/sQFaVozKjHV7RvEMjlXcPKH/KJeT2LAO1bahrNg2W2BtnTCpqgs0ARA8L18eYetIfnVKMtZplPuVIcoDQdgidJJaxFL58SNvec5cUT74FobjAHqv/4pPIUiH3WKxCgWod79r7ChAU0fcuqfwozVg==~1',
}
url = "https://www.toryburch.com/api/prod-r2/v9/categories/handbags-shoulder-bags/products?site=ToryBurch_US&locale=en-us&idmP2=true&pip=true&limit=1&offset=50"

response = requests.get(url, headers=headers , timeout=20)
data = json.loads(response.content)

print(data)